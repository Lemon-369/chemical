<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hy.chemical.mapper.CommodityMapper">
    <!--定义返回值类型，通过resultMap的id引用-->
    <resultMap id="commodity" type="Commodity">
        <id property="sid" column="sid"/>
        <result property="sName" column="sName"></result>
        <result property="userName" column="user_name"></result>
    </resultMap>
    <!--  定义sql：商品管理的模糊查询  -->
    <select id="mySelectPage" parameterType="CommoditySelectVo" resultType="commodity">
        <if test="condition.name!=null and condition.name!=''">
            <bind name="Name" value="'%'+condition.name+'%'"></bind>
        </if>
      select c.sid,c.name,c.cas,s.name sName,c.price_info,c.create_time,c.update_time,c.supplier_id,c.commodity_info,u.user_name
      from commodity c,supplier s,users u
      <where>
            s.gid = c.supplier_id and c.user_id = u.uid
          <if test="condition.name !=null and condition.name!=''">
            and c.name like #{Name}
          </if>
          <if test="condition.cas !=null and condition.cas != ''">
            and c.cas = #{condition.cas}
          </if>
          <if test="condition.updateTimeOne !=null and condition.updateTimeTwo !=null">
            and update_time between #{condition.updateTimeOne} and #{condition.updateTimeTwo}
            order by sid
          </if>
      </where>
    </select>
</mapper>